# การอัปเดตฟีเจอร์รายงานสัตว์

## ฟีเจอร์ใหม่ที่เพิ่มเข้ามา

### 1. การกรองข้อมูลตามสัตว์ (Animal Filter)

- เพิ่ม dropdown สำหรับเลือกสัตว์เฉพาะ
- สามารถเลือกดูว่าสัตว์ชนิดไหน ฟาร์มไหนเลี้ยงบ้าง
- แสดงจำนวนสัตว์ที่เลี้ยงในแต่ละฟาร์ม

### 2. การกรองข้อมูลตามประเภทสัตว์ (Animal Type Filter)

- เพิ่ม dropdown สำหรับเลือกประเภทสัตว์
- เมื่อเลือกสัตว์แล้ว จะแสดงเฉพาะประเภทของสัตว์นั้น
- เช่น เลือก "หมู" จะแสดงเฉพาะประเภทของหมู (เนื้อ, ไขมัน, ฯลฯ)
- Dropdown ประเภทสัตว์จะถูก disable จนกว่าจะเลือกสัตว์ก่อน

### 3. การกรองแบบผสม (Combined Filtering)

- สามารถเลือกเงื่อนไขหลายอย่างพร้อมกัน
- ตัวอย่าง: เลือกฟาร์ม A + สัตว์ไก่ + ประเภทไข่
- ระบบจะแสดงเฉพาะข้อมูลที่ตรงตามเงื่อนไขทั้งหมด

### 4. การแสดงผลหัวข้อรายงาน

- แสดงหัวข้อรายงานตามเงื่อนไขที่เลือก
- เช่น "รายงานสัตว์ ของฟาร์ม ABC ไก่ ประเภทไข่"
- ช่วยให้ผู้ใช้เห็นภาพรวมของรายงานที่จะสร้าง

## การเปลี่ยนแปลงใน Backend

### 1. Controller (CreateReport.js)

- เพิ่มการรับ parameter `animal_id` และ `type_id`
- ปรับปรุง SQL query ให้รองรับการกรองหลายเงื่อนไข
- เพิ่มการแสดงข้อมูล filter ใน PDF report

### 2. Routes (CreateReport.js)

- เพิ่ม API endpoints สำหรับดึงข้อมูลสัตว์และประเภทสัตว์:
  - `GET /api/animals` - ดึงรายการสัตว์ทั้งหมด
  - `GET /api/animal-types` - ดึงรายการประเภทสัตว์ทั้งหมด
  - `GET /api/animal-types/:animal_id` - ดึงประเภทสัตว์ตามสัตว์ที่เลือก

## การเปลี่ยนแปลงใน Frontend

### 1. Component (ReportAnimals.jsx)

- เพิ่ม state สำหรับเก็บข้อมูลสัตว์และประเภทสัตว์
- เพิ่ม dropdown สำหรับเลือกสัตว์และประเภทสัตว์
- ปรับปรุง UI ให้รองรับการกรองหลายเงื่อนไข
- เพิ่มการแสดงผลหัวข้อรายงานตามเงื่อนไขที่เลือก
- เพิ่มการดึงประเภทสัตว์ตามสัตว์ที่เลือกแบบ dynamic
- Disable dropdown ประเภทสัตว์จนกว่าจะเลือกสัตว์ก่อน

## วิธีการใช้งาน

1. **เลือกฟาร์ม**: เลือกฟาร์มเฉพาะหรือเลือก "ทุกฟาร์ม"
2. **เลือกสัตว์**: เลือกสัตว์เฉพาะหรือเลือก "ทุกสัตว์"
3. **เลือกประเภท**: เมื่อเลือกสัตว์แล้ว จะแสดงเฉพาะประเภทของสัตว์นั้น
4. **ดูหัวข้อรายงาน**: ระบบจะแสดงหัวข้อรายงานตามเงื่อนไขที่เลือก
5. **สร้างรายงาน**: กดปุ่ม "สร้างรายงาน" เพื่อสร้าง PDF

## ตัวอย่างการใช้งาน

### ตัวอย่างที่ 1: ดูไก่ไข่ทุกฟาร์ม

- ฟาร์ม: ทุกฟาร์ม
- สัตว์: ไก่
- ประเภท: ไข่ (จะแสดงเฉพาะประเภทของไก่)

### ตัวอย่างที่ 2: ดูสัตว์ทั้งหมดในฟาร์ม A

- ฟาร์ม: ฟาร์ม A
- สัตว์: ทุกสัตว์
- ประเภท: (ยังไม่เลือก)

### ตัวอย่างที่ 3: ดูหมูเนื้อในฟาร์ม B

- ฟาร์ม: ฟาร์ม B
- สัตว์: หมู
- ประเภท: เนื้อ (จะแสดงเฉพาะประเภทของหมู)

## ข้อดีของฟีเจอร์ใหม่

1. **ความยืดหยุ่น**: สามารถกรองข้อมูลได้หลากหลายรูปแบบ
2. **ความแม่นยำ**: ได้ข้อมูลเฉพาะที่ต้องการ
3. **ความสะดวก**: UI ที่ใช้งานง่ายและเข้าใจง่าย
4. **การแสดงผล**: PDF ที่มีข้อมูลครบถ้วนและอ่านง่าย
5. **ความชัดเจน**: หัวข้อรายงานที่แสดงตามเงื่อนไขที่เลือก
